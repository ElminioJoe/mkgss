{% extends "base.html" %}
{% load static %}
{% block content %}

<section class="slider_section">
    <div id="my-carousel" class="carousel slide" data-ride="carousel">
        <ol class="carousel-indicators">
            {% for image in carousel_images %}
            <li data-target="#my-carousel" data-slide-to="{{ forloop.counter0 }}" {% if forloop.first %} class="active"{% endif %}></li>
            {% endfor %}
        </ol>

        <div class="carousel-inner">
            {% for image in carousel_images %}
            <div class="carousel-item {% if forloop.first %}active{% endif %}">
                {% if user.is_authenticated %}
                <!-- Buttons Trigger Modal -->
                <!-- Edit Button -->
                <button type="button" class="btn btn-md btn-outline-primary mx-1" data-toggle="modal" data-target="#openPostModal"
                    data-title="Edit Carousel Image {{ image.id }}" data-url="{% url 'update_carousel_image' image.id %}" data-form="carouselForm" data-placement="top"
                    title="Edit" style="position: absolute; z-index: 99; right: 5px; bottom: 10px; color: #F5F5F5; border-color: #F5F5F5;">
                    <i class="fa-sharp fa-solid fa-pen-to-square"></i>
                </button>
                {% endif %}
                <div class="carousel-overlay"></div>
                <img src="{{ image.carousel_image.url }}" class="d-block w-100" alt="{{ image.image_alt_text }}">
                <div class="carousel-caption d-md-block">
                    <h3>{{ image.caption }}</h3>
                </div>
            </div>
            {% endfor %}
        </div>

        <a class="carousel-control-prev" href="#my-carousel" role="button" data-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" href="#my-carousel" role="button" data-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
        </a>
    </div>


</section>
<div class="relative">
    <a class="bottom_arrow_scroll" href="#about"><img src="{% static 'icon/errow.png' %}" /></a>
</div>
<div class="container-md mt-5 bg-light_silver">
    <div class="p-2 pb-4 text-center rounded">
        {% if user.is_authenticated %}
        <!-- Buttons Trigger Modal -->
        <!-- Edit Button -->
        <button type="button" class="btn btn-sm btn-outline-primary mx-1" data-toggle="modal" data-target="#openPostModal" data-title="Edit HomePage" data-form="homeFeatureForm" data-url="{% url 'home_features_update' home_features.id %}" data-placement="top" title="Edit">
            <i class="fa-sharp fa-solid fa-pen-to-square"></i>
        </button>
        {% endif %}

        <h2>Welcome to Moi Kadzonzo Girls Secondary School</h2>
        <p class="px-4">{{home_features.welcome_info}}</p>
    </div>
    <div class="row my-4 info-cards">
        <div class="col-md-12 col-lg-3 p-4">
            {% if school_values %}<h4>{{ school_values.0.motto }}</h4>{% endif %}
            {% if school_history %}<p>{{ school_history.0.content|truncatewords:57 }}</p>{% endif %}
            <a href="/about#">Read more </a>
        </div>
        <div class="col-md-4 col-lg-3 py-2 px-4">
            <div class="mb-1 info_img">
                <img src="{{home_features.administration_image.url}}" class='img-fluid rounded' alt="{{home_features.administration_image_alt_text}}"/>
            </div>
            <h4 class="mt-2">Administration</h4>
            <p>{{ home_features.administration_info }}</p>
            <a href="/about#">Read more </a>
            <!-- <h4>Board Member</h4> -->
        </div>
        <div class="col-md-4 col-lg-3 py-2 px-4">
            <div class="mb-1 info_img">
                <img src="{{home_features.academics_image.url}}" class='img-fluid rounded' alt="{{home_features.academics_image_alt_text}}"/>
            </div>
            <h4 class="mt-2">Academics</h4>
            <p>{{ home_features.academics_info }}</p>
            <a href="/about#">Read more </a>
        </div>
        <div class="col-md-4 col-lg-3 py-2 px-4">
            <div class="mb-1 info_img">
                <img src="{{home_features.staff_image.url}}" class='img-fluid rounded' alt="{{home_features.staff_image_alt_text}}"/>
            </div>
            <h4 class="mt-2">Staff</h4>
            <p>{{ home_features.staff_info }}</p>
            <a href="/about#">Read more </a>
        </div>
        <div class="col-md-4 col-lg-3 py-2 px-4">
            <div class="mb-1 info_img">
                <img src="{{home_features.curricular_image.url}}" class='img-fluid rounded' alt="{{home_features.curricular_image_alt_text}}"/>
            </div>
            <h4 class="mt-2">Sports & Co-Curricular</h4>
            <p>{{ home_features.curricular_info }}</p>
            <a href="/about#">Read more </a>
            <!-- <h4 class="mt-2">Sports & Co-Curricular</h4> -->
        </div>
        <div class="col-md-4 col-lg-3 py-2 px-4">
            <div class="mb-1 info_img">
                <img src="{{home_features.library_image.url}}" class='img-fluid rounded' alt="{{home_features.library_image_alt_text}}"/>
            </div>
            <h4 class="mt-2">Library</h4>
            <p>{{ home_features.library_info }}</p>
            <a href="/about#">Read more </a>
            <!-- <h4 class="mt-2">Library</h4> -->
        </div>
        <div class="col-md-4 col-lg-3 py-2 px-4">
            <div class="mb-1 info_img">
                <img src="{{home_features.alumni_image.url}}" class='img-fluid rounded' alt="{{home_features.alumni_image_alt_text}}"/>
            </div>
            <h4 class="mt-2">Alumni</h4>
            <p>{{ home_features.alumni_info }}</p>
            <a href="/about#">Read more </a>
            <!-- <h4 class="mt-2">Alumnis</h4> -->
        </div>
        <div class="col-md-12 col-lg-3 px-4 pb-4 pt-0">
            <h4 class="">Admission</h4>
            {% if admission %}<p>{{ admission.0.admission_info|truncatewords:60 }}</p>{% endif %}
            <a href="{% url 'about' %}">Read more </a>
        </div>
    </div>
</div>
<!-- our blog -->
<div id="blog" class="blog theme_bg ">
    <div class="container-md">
        <div class="row">
            <div class="col-md-12">
                <div class="titlepage">
                    <h2>School News</h2>
                </div>
            </div>
        </div>
        <div class="row">
            {% for news_item in news %}
            <div class="col-md-3">
                <div class="blog-box">
                    <figure>
                        {% if news_item.news_image %}
                        <img src="{{news_item.news_image.url}}" class='img-fluid rounded' alt="{{news_item.image_alt_text}}">
                        {% else %}
                        <img src="{% static 'images/IMG_3046.JPG' %}" class='img-fluid rounded' alt="img">
                        {% endif %}
                        <span><i class="fa-solid fa-calendar-days mr-2"></i>{{ news_item.post_date|date:"d M Y" }}</span>
                    </figure>
                    <div>

                    </div>
                    <h4 class="display-5 pt-2">{{news_item.headline}}</h4>
                    <div class="travel">
                        <p>
                            <!-- <span class="Comment"> <i>inb </i>{{news_item.post_date}} </span>
                            <span class="like"> <i class="fa-regular fa-thumbs-up"></i> 05 </span> -->
                            <span> <i class="fa-sharp fa-solid fa-user mr-1"></i> {{news_item.publisher}}</span>
                        </p>
                    </div>
                    <p>{{ news_item.news|truncatechars:350}}</p>
					<a href="{% url 'news-detail' news_item.slug %}" class="mt-2 more bg-light text-dark">Read More</a>
                </div>
            </div>
            {% empty %}
            <div class="col-md-12">
                <h2 class="text-center">There are No News Items</h2>
            </div>
            {% endfor %}
        </div>

    </div>
</div>
<p></p>
<!-- Modals Body only Section -->
<form action="" id="SchoolInfoForm" class="myForm" method="POST" enctype="multipart/form-data">
    <div class="modal fade" id="openPostModal" tabindex="-1" role="dialog" aria-labelledby="ModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-scrollable" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title text-uppercase" id="ModalLongTitle">School Info</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <!-- Form -->
                    <fieldset class="aligned d-none" id="homeFeatureForm"></fieldset>
                    <fieldset class="aligned d-none" id="carouselForm"></fieldset>
                        <!-- <input type="submit" class="btn btn-primary btn-md font-weight-bold" value="Save"> -->
                </div>
                <div class="modal-footer">
                    <input type="submit" class="btn btn-primary btn-md font-weight-bold" value="Save">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
</form>
<!-- End Modal -->

{% endblock %}