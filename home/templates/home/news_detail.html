{% extends "base.html" %}
{% load static %}
{% block content %}
<div class="jumbotron py-5 mb-5">
	<h2 class="text-uppercase text-center">News</h2>
</div>
{% comment %}
<div class="breadcrumb bg-light">
	<div class="container-md">
		{% include "breadcrumb.html" %}
	</div>
</div>
{% endcomment %}

<section class="news_detail">
    <div class="container-md">
		<div class="row">
			<div class="col-lg-8 col-md-7">
				<div class="main-post">
					<div class="news_item p-2">
						<div class="post-image">
							<!-- <div class="overlay overlay-bg"></div> -->
							{% if news_item.news_image %}
							<img src="{{ news_item.news_image.url }}"	class="img-fluid" alt="{{ news_item.image_alt_text }}"/>
							{% else %}
							<img src="{% static 'images/IMG_3046.JPG' %}" class="img-fluid" alt="img"/>
                    		{% endif %}
						</div>
					</div>
					<div class="p-2">
                    	<div class="mb-2 ">
									<a href="{{ news_item.get_absolute_url }}" data-toggle="tooltip" data-placement="right" title="News">
										<i class="fa-solid fa-angles-left fa-beat-fade fa-lg" style="color: #6d3d14;"></i>
									</a>
							<h2>{{ news_item.headline }}</h2>
                    	    <div class="meta d-flex">
								<span class="text-muted">
						    		<i class="fa-sharp fa-solid fa-user mr-1"></i>
						    		{{ news_item.publisher }}
                    	    	</span>
								<span class="mx-2 text-muted mr-auto">
                    	    	    <i class="fa-solid fa-calendar-days mr-1"></i>
                    	    	    {{ news_item.post_date|date:"d F Y" }}
                    	    	</span>

								{% if user.is_authenticated %}
								<!-- Buttons Trigger Modal -->
                            	<!-- Edit Button -->
                            	<button type="button" class="btn btn-sm btn-outline-primary mx-1" data-toggle="modal" data-target="#openPostModal" data-title="Edit: {{ news_item.headline }} Article" data-url="{% url 'news_update' news_item.id %}" data-form="newsForm" data-placement="top" title="Edit">
                            	    <i class="fa-sharp fa-solid fa-pen-to-square"></i>
                            	</button>
                            	<!-- Delete Button -->
                            	<button type="button" class="btn btn-sm btn-outline-danger" data-toggle="modal" data-target="#deleteModal" data-title="Delete {{ news_item.headline }}" data-url="{% url 'news_delete' news_item.id %}" data-form="deleteForm" data-placement="top" title="Delete">
                            	    <i class="fa-solid fa-trash"></i>
                            	</button>
								{% endif %}
							</div>
                    	</div>
						<div class="mb-2 para-br">{{ news_item.news|safe }}</div>
					</div>
                </div>
			</div>
			<div class="col-lg-4 col-md-5">
                <div class="side-bars">
					<h4 class="theme_bg text-white p-2">Events</h4>
					<div class="event-list p-3">
						<p>this</p>
					</div>

					<h4 class="theme_bg text-white p-2">News</h4>
                    <div class="news_post-list p-3">
                        {% for news_item in news %}
				        <div class="row align-items-center news_item">
							<div class="col-5 p-2">
				        		<div class="post-image">
				        			<!-- <div class="overlay overlay-bg"></div> -->
				        			{% if news_item.news_image %}
				        			<img src="{{ news_item.news_image.url }}"	class="im rounded" alt="{{news_item.image_alt_text}}"/>
				        			{% else %}
				        			<img src="{% static 'images/IMG_3046.JPG' %}" class="img-fluid rounded" alt="img"/>
                            		{% endif %}
				        		</div>
							</div>
							<div class="col-7 p-2">
                            	<div class="mb-2 ">
				        		    <a href="{% url 'news-detail' news_item.slug %}" class="stretched-link">
										<h5 class="display-6">{{ news_item.headline }}</h5>
									</a>
                            	    <div class="meta d-flex">
				        				<span class="text-muted">
				        		    		<i class="fa-sharp fa-solid fa-user mr-1"></i>
				        		    		{{ news_item.publisher.first_name }}
                            	    	</span>
				        				<span class="mx-2 text-muted">
                            	    	    <i class="fa-solid fa-calendar-days mr-1"></i>
                            	    	    {{ news_item.post_date|date:"d M Y" }}
                            	    	</span>
				        			</div>
                            	</div>
				        		<!-- <p class="mb-2">{{ news_item.news|truncatechars:200 }}</p> -->
							</div>
                        </div>
				        {% endfor %}
                    </div>
                </div>
            </div>
		</div>
	</div>
</section>

<!-- Modals Body only Section -->
<form action="" class="myForm" method="POST" enctype="multipart/form-data">
    <div class="modal fade" id="openPostModal" tabindex="-1" role="dialog" aria-labelledby="ModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-scrollable" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title text-uppercase" id="ModalLongTitle">School Info</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <!-- All Forms -->

                    <!-- News form -->
                    <fieldset class="aligned d-none" id="newsForm"></fieldset>

                </div>
                <div class="modal-footer">
                    <input type="submit" class="btn btn-primary btn-md font-weight-bold" value="Save">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
</form>
<!-- End Modal -->

<!-- Delete Modal -->
<form action="" class="myForm" method="POST" enctype="multipart/form-data">
    <div class="modal fade" id="deleteModal" tabindex="-1" role="dialog" aria-labelledby="ModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title text-uppercase" id="ModalLongTitle">School Info</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <!-- Form -->

                    <fieldset class="aligned" id="deleteForm"></fieldset>

                </div>
                <div class="modal-footer">
                    <input type="submit" class="btn btn-danger btn-md font-weight-bold" value="Delete">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
</form>
<!-- End Modal -->
{% endblock %}
